<!doctype html>

<html>
    <head>
        <title>Technology</title>
        
        <link href='http://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="styles/reddit.css?v=2" />
        
    </head>
    <body>
        <video class="background-video" src="video/BG_Loop2.mp4" autoplay loop></video>
        <header>
            <h1>This Week in <span>Technology</span></h1>
            
            <div id="dateline">
                Tuesday, June 24, 2014
            </div>
            
        </header>
        <section>
            <p class="content" id="content1"></p>
            <p class="content" id="content2"></p>
            <p class="content" id="content3"></p>
            <p class="content" id="content4"></p>
            <p class="content" id="content5"></p>
            <p class="content" id="content6"></p>
        </section>
        <footer>
            Brought to you by Klick Labs
        </footer>
        
        <script src="scripts/jquery.min.js"></script>
        <script src="scripts/common.js"></script>
        <script>
        
            var qs = getQuerystring();
            var feed = qs.feed || "reddit";
            
            function update() {
                $.ajax({
                    url: "/utild/technews/" + feed,
                    success: function(data) {
                        var lines = 9;
                        
                        for(var i = 0; i < 6; i++) {
                            var d = data[i];
                            if(!d) d = {title: "", date: ""};
                            
                            if(i == 0) {
                                $("#dateline").text(d.date);
                            }
                            
                            lines -= Math.ceil(d.title.length / 55);
                            console.log(lines);
                            
                            if(lines >= 0) {
                                $("#content" + (i + 1)).text(d.title);
                                lines--;
                            } else {
                                
                                $("#content" + (i + 1)).text("");
                            }
                            
                        }
                    }
                })
                
                setTimeout(update, 15 * 60000);
            }
            
            update();
            
        </script>
    </body>
</html>